/* -- 1. CONFIGURACIÓN GLOBAL Y FUENTES -- */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

:root {
    /* Paleta de Colores - Inspirado en Material You */
    --md-sys-color-primary: #1A73E8; /* Azul vibrante */
    --md-sys-color-on-primary: #FFFFFF;
    --md-sys-color-primary-container: #D4E2FF;
    --md-sys-color-on-primary-container: #001C3B;

    --md-sys-color-secondary: #6A5ACD; /* Morado suave */
    --md-sys-color-on-secondary: #FFFFFF;
    --md-sys-color-secondary-container: #E8DFFF;
    --md-sys-color-on-secondary-container: #22005D;

    --md-sys-color-tertiary: #006A6A; /* Cian */
    --md-sys-color-on-tertiary: #FFFFFF;
    --md-sys-color-tertiary-container: #6FF7F7;
    --md-sys-color-on-tertiary-container: #002020;

    --md-sys-color-error: #BA1A1A;
    --md-sys-color-on-error: #FFFFFF;
    --md-sys-color-error-container: #FFDAD6;
    --md-sys-color-on-error-container: #410002;

    --md-sys-color-background: #F8F7FA;
    --md-sys-color-on-background: #1C1B1F;

    --md-sys-color-surface: #FFFBFE;
    --md-sys-color-on-surface: #1C1B1F;
    --md-sys-color-surface-variant: #E7E0EB;
    --md-sys-color-on-surface-variant: #49454E;

    --md-sys-color-outline: #7A757F;
    --md-sys-color-shadow: #000000;
    --md-sys-color-inverse-surface: #313034;
    --md-sys-color-inverse-on-surface: #F4EFF4;
    --md-sys-color-inverse-primary: #A2C7FF;
    --md-sys-color-surface-tint: var(--md-sys-color-primary);

    /* Tus variables originales ajustadas o mapeadas */
    --bg: var(--md-sys-color-surface);
    --text: var(--md-sys-color-on-surface);
    --subtle-text: var(--md-sys-color-on-surface-variant);
    --muted-text: var(--md-sys-color-outline);
    --border: var(--md-sys-color-surface-variant);
    --input-bg: var(--md-sys-color-background); /* Usamos background para inputs ligeros */
    --input-border: var(--md-sys-color-outline);
    --accent: var(--md-sys-color-primary); /* Mantenemos tu idea de acento, mapeado a primary */
    --accent-hover: #1664CC; /* Un tono ligeramente más oscuro para hover */
    --danger: var(--md-sys-color-error);
    --danger-hover: #9E0000;

    --step-inactive: var(--md-sys-color-surface-variant);
    --step-active: var(--md-sys-color-primary);

    /* Radios y Sombras de Material Design 3 */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 28px; /* Material Design usa radios más grandes en componentes principales */
    --radius-full: 50%; /* Para elementos circulares */

    --shadow-1: 0px 1px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.3);
    --shadow-2: 0px 2px 6px 2px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.3);
    --shadow-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px 0px rgba(0, 0, 0, 0.3);

    --transition: 0.3s cubic-bezier(0.2, 0, 0, 1); /* Curva de aceleración/desaceleración de Material Design */

    /* Tipografía - Escala para Material Design */
    --display-large-size: 57px;
    --display-medium-size: 45px;
    --display-small-size: 36px;

    --headline-large-size: 32px;
    --headline-medium-size: 28px;
    --headline-small-size: 24px;

    --title-large-size: 22px;
    --title-medium-size: 16px;
    --title-small-size: 14px;

    --body-large-size: 16px;
    --body-medium-size: 14px;
    --body-small-size: 12px;

    --label-large-size: 14px;
    --label-medium-size: 12px;
    --label-small-size: 11px;
}

html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%; /* Evita el ajuste de tamaño de fuente en móviles */
}

body {
    width: 100%;
    /* max-width: 100vw; - Removido para evitar problemas potenciales */
    overflow-x: hidden;
    margin: 0;
    padding: 0;
    background: var(--md-sys-color-background);
    font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.5; /* Mejor legibilidad */
}

/* -- 2. LAYOUT PRINCIPAL -- */
.container {
    min-height: 100vh;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1rem; /* Más compacto en móvil */
    box-sizing: border-box;
}

.card {
    background: var(--bg);
    border-radius: var(--radius-lg); /* Bordes más grandes para Material Design 3 */
    box-shadow: var(--shadow-2); /* Sombra más pronunciada pero limpia */
    border: none; /* Material Design 3 prefiere elevación sobre bordes explícitos */
    width: 100%;
    max-width: 480px; /* Ancho optimizado para legibilidad en móviles y tabletas */
    margin: 1.5rem auto;
    padding: 2rem 1.5rem; /* Relleno generoso pero adaptado a móvil */
    display: flex;
    flex-direction: column;
    gap: 1rem; /* Espacio uniforme entre elementos principales */
    box-sizing: border-box;
    overflow: hidden; /* Asegura que el contenido no se desborde */
}

/* -- 3. TIPOGRAFÍA Y ENCABEZADOS -- */
.title {
    text-align: center;
    font-size: var(--headline-small-size); /* Título principal, adaptable */
    font-weight: 700;
    color: var(--text);
    margin: 0;
    line-height: 1.2;
    letter-spacing: -0.01em; /* Ajuste sutil para mejor apariencia */
}

.subtitle {
    text-align: center;
    color: var(--muted-text);
    font-size: var(--body-large-size); /* Subtítulo, más grande para legibilidad */
    font-weight: 400;
    margin: 0.5rem 0 1rem 0; /* Espaciado ajustado */
    line-height: 1.4;
}

.sectionTitle {
    font-size: var(--title-large-size); /* Títulos de sección */
    color: var(--subtle-text);
    margin: 1.5rem 0 0.75rem 0;
    font-weight: 700;
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
}

/* -- 4. GRUPOS DE FORMULARIO E INPUTS -- */
form {
    display: flex;
    flex-direction: column;
    gap: 1rem; /* Espacio uniforme entre grupos de inputs */
}

.inputGroup {
    display: flex;
    flex-direction: column;
    gap: 0.4rem; /* Espacio entre label e input, más compacto */
}

.label {
    color: var(--subtle-text);
    font-size: var(--label-large-size); /* Tamaño de label de Material Design */
    font-weight: 500;
    user-select: none;
    margin-left: 0.25rem; /* Pequeño ajuste para alineación visual */
}

.input {
    background: var(--input-bg);
    color: var(--text);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm); /* Bordes más sutiles para inputs */
    padding: 0.75rem 1rem; /* Relleno para una buena área de toque */
    font-size: var(--body-large-size);
    width: 100%;
    box-sizing: border-box;
    transition: border-color var(--transition), box-shadow var(--transition), background-color var(--transition);
}

.input::placeholder {
    color: var(--muted-text);
    opacity: 0.8;
}

.input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--md-sys-color-primary-container); /* Sutil resplandor de foco de Material Design */
    background: var(--md-sys-color-surface); /* Fondo ligeramente diferente al enfocar */
}

.input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: var(--md-sys-color-surface-variant);
    color: var(--md-sys-color-on-surface-variant);
}

.inputWrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.eyeButton {
    position: absolute;
    right: 0.8rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--muted-text);
    font-size: 1.35rem; /* Icono ligeramente más grande */
    cursor: pointer;
    padding: 0.25rem;
    transition: color var(--transition);
    display: flex; /* Para centrar el icono si es un SVG/Font Icon */
    align-items: center;
    justify-content: center;
}
.eyeButton:hover {
    color: var(--accent);
}
.eyeButton:active {
    transform: translateY(-50%) scale(0.95); /* Pequeño efecto de pulsación */
}

/* -- 5. BOTONES Y LINKS -- */
.button {
    width: 100%;
    background: var(--accent);
    color: var(--md-sys-color-on-primary);
    font-size: var(--label-large-size); /* Tamaño de fuente para botones */
    font-weight: 500; /* Peso de fuente típico de Material Design */
    border: none;
    border-radius: var(--radius-md); /* Bordes redondeados */
    padding: 0.9rem 1.5rem;
    cursor: pointer;
    transition: background-color var(--transition), transform var(--transition), box-shadow var(--transition);
    box-shadow: var(--shadow-1); /* Sombra sutil para estado normal */
    display: flex; /* Para centrar contenido si es necesario */
    align-items: center;
    justify-content: center;
    min-height: 48px; /* Altura mínima de touch target */
}

.button:hover:not([disabled]) {
    background: var(--accent-hover);
    box-shadow: var(--shadow-2); /* Sombra más profunda al pasar el ratón */
}

.button:active:not([disabled]) {
    transform: translateY(0); /* Quita el translateY al hacer clic para un "push" */
    box-shadow: var(--shadow-1); /* Vuelve a la sombra base */
    background: var(--accent); /* Se mantiene el color normal para el feedback */
}

.button:disabled {
    opacity: 0.4; /* Opacidad para el estado deshabilitado */
    cursor: not-allowed;
    background: var(--md-sys-color-surface-variant);
    color: var(--md-sys-color-on-surface-variant);
    box-shadow: none;
}

.navButtons {
    display: flex;
    flex-direction: column; /* Apilar botones en móvil */
    gap: 0.75rem; /* Espacio reducido entre botones */
    margin-top: 1.5rem;
}

.navButtons .button {
    width: 100%; /* Asegura que ocupen todo el ancho */
}

.navButtons .button:not(:last-child) {
    background: var(--md-sys-color-secondary-container); /* Botones secundarios de Material Design */
    color: var(--md-sys-color-on-secondary-container);
    border: none;
    box-shadow: none;
}
.navButtons .button:not(:last-child):hover:not([disabled]) {
    background: var(--md-sys-color-secondary); /* Hover para secundarios */
    color: var(--md-sys-color-on-secondary);
    box-shadow: var(--shadow-1);
}

.link {
    color: var(--accent);
    font-weight: 500;
    cursor: pointer;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition), color var(--transition);
    font-size: var(--body-medium-size);
}
.link:hover {
    border-color: var(--accent);
    color: var(--accent-hover);
}

.switchText {
    margin-top: 1rem;
    color: var(--muted-text);
    font-size: var(--body-small-size);
    text-align: center;
    line-height: 1.4;
}

/* -- 6. COMPONENTES ESPECÍFICOS (STEPPER, CONFIRMACIÓN) -- */
.stepper {
    display: flex;
    justify-content: space-between; /* Ajustado a space-between para mejor distribución */
    margin-bottom: 1.5rem;
    padding: 0.75rem;
    background: var(--md-sys-color-surface-variant); /* Fondo diferente para stepper */
    border-radius: var(--radius-lg); /* Redondez acorde a Material Design */
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05); /* Sombra interna sutil */
}

.step {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.4rem; /* Espacio reducido */
    position: relative; /* Para la línea de conexión */
}

.stepNumber {
    width: 2.5rem; /* Un poco más grande */
    height: 2.5rem; /* Un poco más grande */
    background: var(--step-inactive);
    color: var(--muted-text);
    border-radius: var(--radius-full);
    font-size: var(--title-small-size);
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--transition), color var(--transition);
    border: 2px solid var(--step-inactive); /* Borde sutil */
}

.step.active .stepNumber {
    background: var(--step-active);
    color: var(--md-sys-color-on-primary);
    border-color: var(--step-active);
}

.stepLabel {
    font-size: var(--label-small-size);
    color: var(--muted-text);
    font-weight: 500;
    text-align: center;
    white-space: nowrap; /* Evita que el texto se rompa */
    overflow: hidden;
    text-overflow: ellipsis; /* Añade puntos suspensivos si se desborda */
    max-width: 100%; /* Asegura que no se desborde del padre */
}

.step.active .stepLabel {
    color: var(--accent);
    font-weight: 700;
}

/* Líneas de conexión para el Stepper (Opcional, pero común en Material Design) */
.stepper .step:not(:last-child)::after {
    content: '';
    position: absolute;
    top: 1.25rem; /* Alineado con el centro del número */
    left: calc(50% + 1.25rem); /* Inicia después del número */
    width: calc(100% - 2.5rem - 1rem); /* Ajusta el ancho para que no se superponga */
    height: 2px;
    background-color: var(--step-inactive);
    z-index: -1;
    transition: background-color var(--transition);
}

.stepper .step.active + .step::after,
.stepper .step.active::after {
    background-color: var(--step-active);
}

.confirmBox {
    background: var(--input-bg);
    border-radius: var(--radius-md);
    padding: 1.5rem;
    border: 1px solid var(--border); /* Un borde ligero para la caja de confirmación */
}

.confirmGrid {
    display: grid;
    grid-template-columns: 1fr; /* Una columna en móvil */
    gap: 1rem; /* Espacio entre filas */
}

.confirmItem {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.confirmLabel {
    color: var(--accent);
    font-size: var(--label-medium-size);
    font-weight: 500;
}

.confirmValue {
    color: var(--text);
    font-size: var(--body-medium-size);
    word-break: break-word;
}

/* -- 7. MENSAJES Y FOOTER -- */
.msg {
    border-radius: var(--radius-md);
    margin: 1rem 0;
    padding: 0.9rem 1.2rem;
    font-size: var(--body-medium-size);
    border: 1px solid;
    background-color: var(--md-sys-color-primary-container); /* Usamos el contenedor para mensajes de éxito */
    color: var(--md-sys-color-on-primary-container);
    border-color: var(--md-sys-color-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Estilo para mensajes de error, si los tuvieras */
.msg.error {
    background-color: var(--md-sys-color-error-container);
    color: var(--md-sys-color-on-error-container);
    border-color: var(--md-sys-color-error);
}

.footer {
    width: 100%;
    text-align: center;
    color: var(--muted-text);
    font-size: var(--body-small-size);
    padding: 1.5rem 1rem;
}

/* -- 8. RESPONSIVIDAD ESPECÍFICA -- */

/* Media query para pantallas más pequeñas (teléfonos muy pequeños, landscape) */
@media (max-width: 360px) {
    .card {
        padding: 1.5rem 1rem;
        margin: 1rem auto;
    }
    .title {
        font-size: var(--headline-small-size);
    }
    .subtitle {
        font-size: var(--body-medium-size);
    }
    .input {
        padding: 0.65rem 0.8rem;
        font-size: var(--body-medium-size);
    }
    .button {
        padding: 0.8rem 1rem;
        font-size: var(--label-medium-size);
        min-height: 44px;
    }
    .stepper {
        padding: 0.5rem;
    }
    .stepNumber {
        width: 2rem;
        height: 2rem;
        font-size: var(--title-small-size);
    }
    .stepper .step:not(:last-child)::after {
        top: 1.1rem;
        left: calc(50% + 1rem);
        width: calc(100% - 2rem - 0.75rem);
    }
    .stepLabel {
        display: none; /* Oculta las etiquetas en pantallas muy pequeñas */
    }
}

/* Media query para móviles estándar y tabletas pequeñas en vertical */
@media (max-width: 600px) {
    .container {
        padding: 0; /* Ocupa todo el ancho en móvil */
        justify-content: flex-start; /* Alinea al inicio si la tarjeta es muy alta */
    }
    .card {
        max-width: 100%;
        border-radius: 0; /* Sin bordes redondeados en los extremos de la pantalla */
        padding: 2rem 1.5rem;
        margin: 0;
        border: none;
        box-shadow: none; /* Sin sombra en los extremos */
        min-height: 100vh; /* Asegura que la tarjeta ocupe toda la pantalla verticalmente */
        justify-content: center; /* Centra el contenido dentro de la tarjeta */
        gap: 1.25rem;
    }
    .title {
        font-size: var(--headline-medium-size);
        margin-top: 1rem; /* Espacio extra en la parte superior del título */
    }
    .subtitle {
        font-size: var(--body-large-size);
    }
    .navButtons {
        flex-direction: column; /* Asegura que los botones se apilen */
        gap: 0.8rem;
    }
    .stepper {
        padding: 0.75rem;
        border-radius: var(--radius-md); /* Mantiene un radio más pequeño en móvil */
        box-shadow: var(--shadow-sm); /* Sombra ligera en el stepper */
    }
    .stepLabel {
        font-size: var(--label-small-size); /* Mantener visible en móviles estándar */
        max-width: 90%; /* Limitar para evitar desbordamiento */
    }
    .stepper .step:not(:last-child)::after {
        width: calc(100% - 2.5rem - 0.75rem); /* Ajuste de ancho de línea */
    }
    .confirmGrid {
        grid-template-columns: 1fr; /* Siempre una columna en móvil */
    }
}

/* Media query para tabletas en vertical o escritorios pequeños */
@media (min-width: 601px) and (max-width: 900px) {
    .card {
        max-width: 580px; /* Un poco más ancho para tabletas */
        padding: 3rem;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-2);
    }
    .title {
        font-size: var(--headline-large-size);
    }
    .subtitle {
        font-size: var(--title-large-size);
    }
    .navButtons {
        flex-direction: row; /* Botones en fila en tabletas */
        justify-content: space-between;
        gap: 1.25rem;
    }
    .navButtons .button {
        flex: 1; /* Distribuye el espacio equitativamente */
    }
    .stepper {
        padding: 1rem;
    }
    .stepNumber {
        width: 2.75rem;
        height: 2.75rem;
        font-size: var(--title-medium-size);
    }
    .stepLabel {
        font-size: var(--label-large-size);
        display: block; /* Asegura visibilidad */
    }
    .stepper .step:not(:last-child)::after {
        top: 1.35rem;
        left: calc(50% + 1.35rem);
        width: calc(100% - 2.75rem - 1rem);
    }
    .confirmGrid {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Dos columnas si hay espacio */
    }
}

/* Desktop y pantallas grandes (para asegurar que se vea bien en cualquier lugar) */
@media (min-width: 901px) {
    .card {
        max-width: 650px; /* Ancho cómodo para escritorio */
        padding: 3.5rem;
    }
    .title {
        font-size: var(--display-small-size);
    }
    .subtitle {
        font-size: var(--headline-small-size);
    }
    .navButtons {
        flex-direction: row;
        justify-content: flex-end; /* Botones alineados a la derecha */
        gap: 1.5rem;
    }
    .navButtons .button {
        width: auto; /* Ancho auto en desktop */
        padding-left: 2rem;
        padding-right: 2rem;
    }
}